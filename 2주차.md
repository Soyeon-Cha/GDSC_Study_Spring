## 0. 강좌 소개
- JDBC : 코드는 줄었지만 SQL 하나하나 다 작성해야 됨
- JPA는 SQL조차 쓸 필요 없음
-  JPA가 실무에서 어려운 이유 : 객체나 테이블 정확히 매핑해야 됨
- 목표 : 객체와 테이블 설계 매핑, JPA 내부 동작 방식 이해

## 1. JPA 소개
- 데이터베이스는 SQL만 알아 들음
- 객체 CURD
- 관계형 : 데이터를 정교화해서 잘 보관하는 게 목표
- 객체 : 필드나 메서드 등을 잘 캡슐화해서 쓰는 게 목표
- 연관관계 : 참조(객체는 Team에서 Member로 못 감), 외래 키(테이블 양방향으로 이동 가능)

## 2. JPA 시작하기
- H2 데이터베이스, 메이븐, JPA 하이버네이트
- JPA는 특정 데이터베이스에 종속적이지 않음. 데이터베이스 바꿔도 됨.
- 일관되는 수행을 할 때마다 EntityManager를 만들어 줘야 함
- 만들고 JPA 저장하고 commit
- hibernate.show_sql : 화면에 쿼리 보임
- hibernate.format_sql : 들여쓰기
- hibernate.use_sql_comments : 쿼리의 생성 이유를 주석으로 알려줌
- tx.begin();
- .remove
- 엔티티 매니저 팩토리는 한 개만 생성
- JPA의 데이터 변경은 트랜잭션 안에서 실행
- JPQL : JPA에서 쿼리에 대한 대응. 객체 지향 SQL

## 3. 영속성 관리
- 영속성 context : 엔티티를 영구 저장하는 환경.
- 비영속, 영속, 준영속, 삭제
- .persist() : 영속
- .detatch() : 준영속
- .remove() : 삭제
- 엔티티 조회, 1차 캐시, 데이터베이스에서 조회
- 엔티티 등록, 수정, 삭제
- 플러시
 - 웬만하면 AUTO로 씀.
 - 트랜잭션 커밋하거나 쿼리 실행할 때 플러시
 - 영속성 컨텍스트와 트랜잭션 주기 맞춰야 됨
- 준영속 상태로 만들기 : em.detach(entity), em.clear(), em.close()
